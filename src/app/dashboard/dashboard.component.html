<main class="max-w-[1280px] mx-auto px-4 sm:px-6 py-8">
  <div class="flex items-center justify-between gap-4 mb-6">
    <div>
      <h1 class="text-2xl sm:text-3xl font-bold text-text-main dark:text-white">Dashboard</h1>
      <p class="text-sm text-text-muted dark:text-gray-400">Browse code snippets, react, and comment.</p>
    </div>
  </div>

  @if (error()) {
    <div class="mb-6 rounded-2xl border border-danger/20 bg-danger/10 px-4 py-3 text-danger">
      <div class="flex items-center gap-2">
        <span class="material-symbols-outlined">error</span>
        <span class="text-sm font-medium">{{ error() }}</span>
      </div>
      <button
        class="mt-3 inline-flex items-center gap-2 rounded-full bg-white/60 dark:bg-white/10 px-4 py-2 text-sm font-semibold text-text-main dark:text-white hover:bg-white/80 dark:hover:bg-white/15 transition-colors"
        (click)="loadFirstPage()">
        <span class="material-symbols-outlined">refresh</span>
        Retry
      </button>
    </div>
  }

  @if (posts().length === 0 && !loading() && !error()) {
    <div class="rounded-3xl border border-[#f5f5f0] dark:border-white/10 bg-white dark:bg-card-dark p-10 text-center">
      <div class="inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-primary text-black mb-4">
        <span class="material-symbols-outlined text-3xl">code</span>
      </div>
      <h2 class="text-lg font-bold text-text-main dark:text-white">No posts yet</h2>
      <p class="text-sm text-text-muted dark:text-gray-400">Check back later.</p>
    </div>
  }

  <div class="space-y-6">
    @for (post of posts(); track post.id) {
      <app-post-card [post]="post"></app-post-card>
    }
  </div>

  <div class="mt-8 flex items-center justify-center">
    @if (loading()) {
      <div class="flex items-center gap-2 text-text-muted dark:text-gray-400">
        <span class="material-symbols-outlined animate-spin">progress_activity</span>
        <span class="text-sm">Loadingâ€¦</span>
      </div>
    } @else if (posts().length > 0 && canLoadMore()) {
      <button
        class="inline-flex items-center gap-2 rounded-full bg-primary text-black px-5 py-2.5 text-sm font-semibold hover:bg-[#e6e205] transition-colors"
        (click)="loadMore()">
        <span class="material-symbols-outlined">expand_more</span>
        Load more
      </button>
    }
  </div>
</main>
