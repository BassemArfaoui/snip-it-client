<div class="min-h-screen bg-background-light dark:bg-background-dark py-8">
  <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="mb-8">
      <a
        routerLink="/issues"
        class="inline-flex items-center gap-1 text-text-muted dark:text-gray-400 hover:text-text-main dark:hover:text-white transition-colors mb-4"
      >
        <span class="material-symbols-outlined">arrow_back</span>
        <span>Back to Issues</span>
      </a>
      <h1 class="text-3xl font-bold text-text-main dark:text-white mb-2">Create New Issue</h1>
      <p class="text-text-muted dark:text-gray-400">
        Describe your coding problem and get help from the community
      </p>
    </div>

    <!-- Form Card -->
    <div class="bg-white dark:bg-card-dark rounded-2xl shadow-soft border border-gray-100 dark:border-white/10 p-8">
      @if (error) {
        <div class="mb-6 flex items-center gap-2 p-4 bg-danger-light dark:bg-danger-dark/20 border border-danger-light dark:border-danger-dark rounded-lg text-danger-dark dark:text-danger-light">
          <span class="material-symbols-outlined">error</span>
          <span>{{ error }}</span>
        </div>
      }

      <form [formGroup]="issueForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <!-- Content Field -->
        <div>
          <label for="content" class="block text-sm font-semibold text-text-main dark:text-white mb-2">
            Issue Description *
          </label>
          <textarea
            id="content"
            formControlName="content"
            rows="8"
            class="w-full px-4 py-3 rounded-lg border text-text-main dark:text-white bg-white dark:bg-background-dark transition-colors focus:ring-2 focus:ring-primary focus:border-transparent"
            [class.border-gray-300]="!content?.invalid || !content?.touched"
            [class.border-red-500]="content?.invalid && content?.touched"
            placeholder="Describe the problem you're facing in detail...">
          </textarea>
          
          @if (content?.invalid && content?.touched) {
            <p class="mt-2 text-sm text-red-600 dark:text-red-400">
              @if (content?.errors?.['required']) {
                Issue description is required
              } @else if (content?.errors?.['minlength']) {
                Issue description must be at least 10 characters long
              }
            </p>
          }
          <p class="mt-2 text-sm text-text-muted dark:text-gray-400">
            {{ content?.value?.length || 0 }} characters (minimum 10)
          </p>
        </div>

        <!-- Language Field -->
        <div>
          <label for="language" class="block text-sm font-semibold text-text-main dark:text-white mb-2">
            Programming Language *
          </label>
          <select
            id="language"
            formControlName="language"
            class="w-full px-4 py-3 rounded-lg border text-text-main dark:text-white bg-white dark:bg-background-dark transition-colors focus:ring-2 focus:ring-primary focus:border-transparent"
            [class.border-gray-300]="!language?.invalid || !language?.touched"
            [class.border-red-500]="language?.invalid && language?.touched">
            <option value="" disabled>Select a language</option>
            @for (lang of languages; track lang) {
              <option [value]="lang">{{ lang }}</option>
            }
          </select>
          
          @if (language?.invalid && language?.touched) {
            <p class="mt-2 text-sm text-red-600 dark:text-red-400">
              Please select a programming language
            </p>
          }
        </div>

        <!-- Submit Buttons -->
        <div class="flex gap-3 pt-4">
          <button
            type="submit"
            [disabled]="submitting"
            class="flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-primary hover:bg-primary/90 text-black font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
          >
            @if (submitting) {
              <span class="animate-spin material-symbols-outlined">progress_activity</span>
              <span>Creating...</span>
            } @else {
              <span class="material-symbols-outlined">add</span>
              <span>Create Issue</span>
            }
          </button>
          
          <a
            routerLink="/issues"
            class="px-6 py-3 bg-gray-100 hover:bg-gray-200 dark:bg-white/5 dark:hover:bg-white/10 text-text-main dark:text-white font-semibold rounded-lg transition-colors text-center"
          >
            Cancel
          </a>
        </div>
      </form>

      <!-- Helper Text -->
      <div class="mt-8 pt-6 border-t border-gray-200 dark:border-white/10">
        <h3 class="text-sm font-semibold text-text-main dark:text-white mb-3">Tips for writing a good issue:</h3>
        <ul class="space-y-2 text-sm text-text-muted dark:text-gray-400">
          <li class="flex items-start gap-2">
            <span class="material-symbols-outlined text-primary text-lg">check_circle</span>
            <span>Be specific about the problem you're facing</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="material-symbols-outlined text-primary text-lg">check_circle</span>
            <span>Include what you've already tried</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="material-symbols-outlined text-primary text-lg">check_circle</span>
            <span>Mention any error messages you're seeing</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="material-symbols-outlined text-primary text-lg">check_circle</span>
            <span>Provide context about your development environment</span>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
