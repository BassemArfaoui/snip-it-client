<section class="auth-shell" aria-label="Forgot Password">
  <div class="auth-card">
    <div class="card-header">
      <p class="eyebrow">Password Reset</p>
      <h1>Forgot your password?</h1>
      <p class="subtitle">Enter your email and we'll send you a reset link.</p>
    </div>

    @if (!success) {
      <form class="auth-form" [formGroup]="emailForm" (ngSubmit)="onSubmit()" autocomplete="off">
        @if (error) {
          <div class="error-message">{{ error }}</div>
        }

        <label class="field">
          <span>Email</span>
          <input
            type="email"
            formControlName="email"
            autocomplete="email"
            placeholder="you@email.com"
            [class.invalid]="email?.invalid && email?.touched"
          />
          @if (email?.hasError('required') && email?.touched) {
            <span class="error-hint">Email is required</span>
          }
          @if (email?.hasError('email') && email?.touched) {
            <span class="error-hint">Please enter a valid email</span>
          }
        </label>

        <button
          class="primary"
          type="submit"
          [disabled]="!emailForm.valid || loading"
        >
          {{ loading ? 'Sending...' : 'Send Reset Link' }}
        </button>
      </form>
    } @else {
      <div class="success-section">
        <p class="success-message">âœ“ If the email exists, we've sent a password reset link.</p>
        <p class="info-text">Redirecting to login in {{ countdown }} second<span *ngIf="countdown !== 1">s</span>...</p>
      </div>
    }

    <p class="helper">
      Remember your password?
      <a class="link" routerLink="/login">Log in</a>
    </p>
  </div>
</section>
